@using System.Dynamic;

@functions {

    public static Database db {
        get {
            return Database.Open("Employees");
        }
    }
   
    public static IEnumerable<dynamic> GetEmployees() {
     // SELECT ALL     
        var sql = "SELECT * FROM employee";
        return db.Query(sql);
    }
    
    public static IEnumerable<dynamic> GetEmployees(string sql) {
        // SELECT 
        return db.Query(sql);
    }

     public static dynamic GetEmployeeById(int id)
    {
        //SELECT BY ID
        var sql = "SELECT * FROM employee WHERE ID = @0";
        return db.Query(sql, id).Single();
    }
    
    public static void AddEmployee(dynamic emp) {
        // SAVE NEW EMPLOYEE
        var sql = "INSERT INTO employee  (Company, LastName, FirstName, Email, JobTitle, Mobile, Web, Notes)   VALUES (@0, @1, @2, @3, @4, @5, @6, @7)";
        
        db.Execute(sql, emp.Company, emp.LastName, emp.FirstName, emp.Email, emp.JobTitle, emp.Mobile, emp.Web, emp.Notes);
    }

     public static void UpdateEmployee(dynamic emp) {
        // UPDATE EMPLOYEE
        var sql = "UPDATE employee SET Company=@0, LastName=@1, FirstName=@2, Email=@3, JobTitle=@4, Mobile=@5, Web=@6, Notes=@7 WHERE (ID=@8)";
        
        db.Execute(sql, emp.Company, emp.LastName, emp.FirstName, emp.Email, emp.JobTitle, emp.Mobile, emp.Web, emp.Notes, emp.ID);
    }


    public static void DeleteEmployee(int empID) {
        // DELETE EMPLOYEE
        var sql = "DELETE * FROM employee WHERE ID = @0";
        //db.Execute(sql, empID);
    }

       

    }